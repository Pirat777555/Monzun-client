(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{276:function(t,e,r){var content=r(279);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(52).default)("61d87ffc",content,!0,{sourceMap:!1})},277:function(t,e,r){"use strict";r.r(e);r(20),r(16),r(53),r(63),r(202),r(56);var n=r(17),o=r(0),l={data:function(){var t;return t={isActive:!1,file:[],url:null},Object(o.a)(t,"file",""),Object(o.a)(t,"editUser",{email:"",name:"",phone:"",avatarId:null}),Object(o.a)(t,"logo",{}),t},computed:{user:function(){return this.$store.state.user}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.editUser.name=t.user.name,t.user.logo&&(t.url=t.user.logo.url);case 2:case"end":return e.stop()}}),e)})))()},methods:{visible:function(t){this.isActive=!this.isActive},onFileChange:function(t){var e=this,r=t.target.files[0];this.url=URL.createObjectURL(r),t.target.files[0].size>5e6&&(alert("File is too big!"),this.$refs.file.value=null),this.file=this.$refs.file.files[0];var n=new FormData;n.append("files",this.file),this.$axios.$post("https://monzun.herokuapp.com/api/attachment/upload-image",n,{headers:{Authorization:"Bearer "+this.$cookies.get("tokenUser")}}).then((function(t){e.$bvToast.toast("Изображение добавлено!",{title:"Добавление изображения",variant:"success"}),e.logo=t,e.editUser.avatarId=e.logo.id})).catch((function(t){e.$bvToast.toast("ошибка",{title:"Не удалось отправить изображение",variant:"danger",solid:!0})}))},deleteImage:function(){var t=this;this.$axios.$delete("https://monzun.herokuapp.com/api/attachment/delete/".concat(this.logo.uuid),{headers:{Authorization:"Bearer "+this.$cookies.get("tokenUser")}}).then((function(e){t.$bvToast.toast("Изображение удалено!",{title:"удаление изображений",variant:"success"}),t.$refs.file.value=null})).catch((function(e){t.$bvToast.toast("ошибка",{title:"Не удалось удалить изображение",variant:"danger",solid:!0})}))},changeUser:function(){var t=this;this.editUser.name=this.user.name,this.editUser.phone=this.user.phone,this.editUser.email=this.user.email,this.editUser.name=this.user.name,this.editUser.password=this.user.password,console.log(this.editUser),this.$axios.$put("https://monzun.herokuapp.com/api/me",this.editUser,{headers:{Authorization:"Bearer "+this.$cookies.get("tokenUser")}}).then((function(e){t.$bvToast.toast("Пользователь изменен!",{title:"Изменение пользователя",variant:"success"})})).catch((function(e){t.$bvToast.toast("ошибка",{title:"Не удалось изменить пользователя",variant:"danger",solid:!0})}))}}},c=(r(278),r(41)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row admin-panel"},[r("div",{staticClass:"col-12 admin d-flex"},[r("div",{staticClass:"avatar"},[t.user.logo?r("img",{attrs:{src:t.user.logo.url,alt:""}}):t._e(),t._v(" "),t.user.logo?t._e():r("img",{attrs:{src:"/images/noname.jpg",alt:""}})]),t._v(" "),r("div",{staticClass:"name"},[t._v(t._s(t.editUser.name))]),t._v(" "),r("div",{staticClass:"open-toggle",on:{click:t.visible}},[r("img",{attrs:{src:"/images/dropdown-toggle.png",alt:""}})])]),t._v(" "),r("div",{staticClass:"col-12 admin d-flex"},[r("div",{staticClass:"panel",class:{"panel-active":t.isActive}},[r("ul",[r("li",[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-edit",modifiers:{"modal-edit":!0}}],staticClass:"btn-edit"},[t._v("Редактировать")])],1),t._v(" "),r("li",[r("nuxt-link",{attrs:{to:{name:"login"}},nativeOn:{click:function(e){t.$cookies.set("tokenUser",""),t.$store.commit("setUser",null)}}},[t._v("Выход")])],1)])])]),t._v(" "),r("b-modal",{attrs:{centered:"","hide-header":"","ok-only":"","ok-title":"Изменить",id:"modal-edit"},on:{ok:t.changeUser}},[r("div",{staticClass:"edit"},[r("form",{attrs:{method:"post"}},[r("div",[t.url?t._e():r("img",{staticClass:"edit-avatar",attrs:{src:"images/noname.jpg",alt:""}}),t._v(" "),t.url?r("img",{staticClass:"edit-avatar",attrs:{src:t.url}}):t._e()]),t._v(" "),r("div",{staticClass:"edit-image d-flex"},[r("input",{ref:"file",attrs:{type:"file",accept:"image/x-png,image/gif,image/jpeg"},on:{change:t.onFileChange}}),t._v(" "),r("div",{staticClass:"dlt",on:{click:t.deleteImage}},[r("img",{attrs:{src:"/images/delete.png",alt:""}})])]),t._v(" "),r("div",{staticClass:"edit-text"},[t._v("Имя")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"edit-info",attrs:{type:"text"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),t._v(" "),r("div",{staticClass:"edit-text"},[t._v("Электронная почта")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"edit-info",attrs:{type:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),t._v(" "),r("div",{staticClass:"edit-text"},[t._v("Пароль")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"edit-info",attrs:{type:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._v(" "),r("div",{staticClass:"edit-text"},[t._v("Телефон")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.phone,expression:"user.phone"}],staticClass:"edit-info",attrs:{type:"tel"},domProps:{value:t.user.phone},on:{input:function(e){e.target.composing||t.$set(t.user,"phone",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"close",on:{click:function(e){return t.$bvModal.hide("modal-edit")}}},[r("img",{attrs:{src:"/images/close-modal.svg",alt:""}})])])])],1)}),[],!1,null,"26d5fd97",null);e.default=component.exports},278:function(t,e,r){"use strict";r(276)},279:function(t,e,r){(e=r(51)(!1)).push([t.i,".admin-panel[data-v-26d5fd97]{margin-bottom:50px}.name[data-v-26d5fd97]{font-size:18px;line-height:115%;font-family:Futura PT;color:#77797d;margin-right:5px}.admin[data-v-26d5fd97]{align-items:center;justify-content:flex-end}.admin .avatar[data-v-26d5fd97]{margin-right:10px}.avatar img[data-v-26d5fd97]{width:40px;height:40px;border-radius:50px}.open-toggle[data-v-26d5fd97]{cursor:pointer}.admin-panel:hover .panel[data-v-26d5fd97]{opacity:1}.panel[data-v-26d5fd97]{border:1px solid #e2e2e2;background:#f7f5f5;padding:7px 7px 7px 20px;opacity:0;width:160px}.panel-active[data-v-26d5fd97]{opacity:1}.panel li[data-v-26d5fd97]{list-style-type:none;border-bottom:1px solid #e2e2e2;margin-top:10px}.panel li a[data-v-26d5fd97]{color:#000;text-decoration:none}.panel ul[data-v-26d5fd97]{padding:0;margin:0;text-align:center}.btn-edit[data-v-26d5fd97]{padding:0;background:transparent;border:none;color:#000}.close[data-v-26d5fd97]{position:absolute;top:10px;right:10px}.edit[data-v-26d5fd97]{text-align:center}.edit-avatar[data-v-26d5fd97]{width:100px;height:100px;border-radius:50%;margin-bottom:20px}.edit-text[data-v-26d5fd97]{font-family:Roboto;font-size:18px;line-height:16px;-moz-text-align-last:left;text-align-last:left;color:#000;margin-left:80px;margin-bottom:10px;margin-top:10px}form input[data-v-26d5fd97]{width:80%;padding:10px}.edit-image[data-v-26d5fd97]{width:80%;margin-left:150px}.edit-image input[data-v-26d5fd97]{width:400px}",""]),t.exports=e},306:function(t,e,r){var content=r(335);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(52).default)("1b7833da",content,!0,{sourceMap:!1})},334:function(t,e,r){"use strict";r(306)},335:function(t,e,r){(e=r(51)(!1)).push([t.i,".main{margin-top:30px}.control-tracker{display:flex;justify-content:space-between;align-items:center;margin-bottom:50px}.control-tracker .users{font-family:Montserrat;font-style:normal;font-weight:700;font-size:24px;line-height:120%;letter-spacing:-.03em;color:#333}.btn-add{background:#106466;font-family:Roboto;font-style:normal;font-weight:400;font-size:16px;line-height:19px;padding:13px 25px;text-align:center;color:#fff;border-radius:0!important}.btn-add,.tracker{display:flex;align-items:center}.tracker{justify-content:space-between;margin-bottom:50px}.create-startup .text{display:flex;align-items:center}.create-startup .text,.delete-tracker .text{font-family:Roboto;font-size:20px;line-height:21px;color:#000}.delete-tracker .text{text-align:center;margin-bottom:30px;margin-top:20px}.create-startup .avatar{width:120px;height:120px;background:#c4c4c4;border:1px solid #000;border-radius:50%;overflow:hidden}.create-startup .avatar img{width:100%}form .text-form{font-family:Roboto;font-style:normal;font-weight:400;font-size:18px;line-height:16px;color:#000;margin-bottom:15px}form input,form textarea{width:90%;margin-bottom:50px;padding:10px}.user-block{margin-top:30px}.check-block{width:40px;height:40px;border:1px solid #000;margin-left:10px;text-align:center}.btn-create,.btn-edit{background:#c4c4c4;border:1px solid #000;padding:15px 40px;font-family:Roboto;color:#000}.files{text-align:left;bottom:50px;position:absolute}.edit{text-align:right;cursor:pointer}.edit-visible{display:none!important}",""]),t.exports=e},349:function(t,e,r){"use strict";r.r(e);r(16),r(53),r(63),r(202),r(56);var n,o,l=r(17),c=r(0),d=(r(277),o={name:"index",middleware:"authenticated",data:function(){var t;return t={url:null,btnActive:!1,file:"",startup:{fileIds:[]},startups:[]},Object(c.a)(t,"url",null),Object(c.a)(t,"logo",{}),Object(c.a)(t,"listFiles",[]),Object(c.a)(t,"fileIds",[]),t},computed:{user:function(){return this.$store.state.user}},created:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 3==t.user.role.roleId&&t.$router.push({name:"sets_tracker"}),e.next=3,t.$axios.$get("https://monzun.herokuapp.com/api/startups",{headers:{Authorization:"Bearer "+t.$cookies.get("tokenUser")}});case 3:if(t.startups=e.sent,!(t.startups.length>0)){e.next=8;break}return e.next=7,t.$axios.$get("https://monzun.herokuapp.com/api/startups/".concat(t.startups[0].id),{headers:{Authorization:"Bearer "+t.$cookies.get("tokenUser")}});case 7:t.startup=e.sent;case 8:t.startup.logo&&(t.url=t.startup.logo.url);case 9:case"end":return e.stop()}}),e)})))()}},Object(c.a)(o,"computed",{user:function(){return this.$store.state.user}}),Object(c.a)(o,"methods",(n={createStartup:function(){var t=this;this.$axios.$post("https://monzun.herokuapp.com/api/startups",this.startup,{headers:{Authorization:"Bearer "+this.$cookies.get("tokenUser")}}).then((function(e){t.$bvToast.toast("стартап добавлен!",{title:"Добавление стартапа",variant:"success"}),t.users.push(e)})).catch((function(e){t.$bvToast.toast("ошибка",{title:"Не удалось добавить стартап",variant:"danger",solid:!0})}))},visible:function(t){this.btnActive=!this.btnActive},change:function(){this.btnActive=!this.btnActive},changeStartup:function(t){var e=this;this.$axios.$put("https://monzun.herokuapp.com/api/startups/".concat(t),this.startup,{headers:{Authorization:"Bearer "+this.$cookies.get("tokenUser")}}).then((function(t){e.$bvToast.toast("стартап изменен!",{title:"Изменение стартапа",variant:"success"}),e.btnActive=!e.btnActive})).catch((function(t){e.$bvToast.toast("ошибка",{title:"Не удалось изменить стартап",variant:"danger",solid:!0})}))}},Object(c.a)(n,"createStartup",(function(){var t=this;this.$axios.$post("https://monzun.herokuapp.com/api/startups",this.startup,{headers:{Authorization:"Bearer "+this.$cookies.get("tokenUser")}}).then((function(e){t.$bvToast.toast("стартап создан!",{title:"новый стартап",variant:"success"})})).catch((function(e){t.$bvToast.toast("ошибка",{title:"Не удалось создать стартап",variant:"danger",solid:!0})}))})),Object(c.a)(n,"onFileChange",(function(t){var e=this,r=t.target.files[0];this.url=URL.createObjectURL(r),t.target.files[0].size>5e6&&(alert("File is too big!"),this.$refs.file.value=null),this.file=this.$refs.file.files[0];var n=new FormData;n.append("files",this.file),this.$axios.$post("https://monzun.herokuapp.com/api/attachment/upload-image",n,{headers:{Authorization:"Bearer "+this.$cookies.get("tokenUser")}}).then((function(t){e.$bvToast.toast("Изображение добавлено!",{title:"Добавление изображения",variant:"success"}),e.logo=t,e.startup.logoId=e.logo.id})).catch((function(t){e.$bvToast.toast("ошибка",{title:"Не удалось отправить изображение",variant:"danger",solid:!0})}))})),Object(c.a)(n,"onSomeFilesChange",(function(t){var e=this;this.files=this.$refs.files.files;for(var r=new FormData,i=0;i<this.files.length;i++){var n=this.files[i];r.append("files",n)}this.$axios.$post("https://monzun.herokuapp.com/api/attachment/upload",r,{headers:{Authorization:"Bearer "+this.$cookies.get("tokenUser")}}).then((function(t){e.$bvToast.toast("файлы добавлены!",{title:"Добавление файлов",variant:"success"}),e.listFiles=t;for(var r=0;r<e.listFiles.length;r++)e.fileIds.push(e.listFiles[r].id);e.startup.fileIds=e.fileIds})).catch((function(t){e.$bvToast.toast("ошибка",{title:"Не удалось загрузить файлы",variant:"danger",solid:!0})}))})),n)),o),v=(r(334),r(41)),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("div",{staticClass:"container"},[r("Client"),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"сol-lg-9"},[r("div",{staticClass:"create-startup"},[r("div",{staticClass:"tracker"},[r("div",{staticClass:"text",class:{"edit-visible":t.btnActive}},[t._v("\n                            Мой стартап\n                        ")]),t._v(" "),r("div",{staticClass:"text",class:{"edit-visible":!t.btnActive}},[t._v("\n                            Изменить стартап\n                        ")])]),t._v(" "),r("form",{staticClass:"d-flex justify-content-between"},[r("div",{staticClass:"info"},[r("div",{staticClass:"name"},[r("div",{staticClass:"text-form"},[t._v("Имя")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.startup.name,expression:"startup.name"}],attrs:{type:"text"},domProps:{value:t.startup.name},on:{input:function(e){e.target.composing||t.$set(t.startup,"name",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"description"},[r("div",{staticClass:"text-form"},[t._v("Описание")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.startup.description,expression:"startup.description"}],attrs:{cols:"60",rows:"5"},domProps:{value:t.startup.description},on:{input:function(e){e.target.composing||t.$set(t.startup,"description",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"target"},[r("div",{staticClass:"text-form"},[t._v("Цели стартапа")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.startup.points,expression:"startup.points"}],attrs:{cols:"10",rows:"5"},domProps:{value:t.startup.points},on:{input:function(e){e.target.composing||t.$set(t.startup,"points",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"plan-commercial"},[r("div",{staticClass:"text-form"},[t._v("\n                                    Коммерческий план\n                                ")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.startup.businessPlan,expression:"startup.businessPlan"}],attrs:{cols:"10",rows:"5"},domProps:{value:t.startup.businessPlan},on:{input:function(e){e.target.composing||t.$set(t.startup,"businessPlan",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"plan-grow"},[r("div",{staticClass:"text-form"},[t._v("План роста")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.startup.growthPlan,expression:"startup.growthPlan"}],attrs:{name:"",id:"",cols:"10",rows:"5"},domProps:{value:t.startup.growthPlan},on:{input:function(e){e.target.composing||t.$set(t.startup,"growthPlan",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"area"},[r("div",{staticClass:"text-form"},[t._v("\n                                    Область применения\n                                ")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.startup.useArea,expression:"startup.useArea"}],attrs:{cols:"10",rows:"5"},domProps:{value:t.startup.useArea},on:{input:function(e){e.target.composing||t.$set(t.startup,"useArea",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"tasks"},[r("div",{staticClass:"text-form"},[t._v("Задачи")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.startup.tasks,expression:"startup.tasks"}],attrs:{cols:"10",rows:"5"},domProps:{value:t.startup.tasks},on:{input:function(e){e.target.composing||t.$set(t.startup,"tasks",e.target.value)}}})])])])])]),t._v(" "),r("div",{staticClass:"col-lg-3"},[r("div",{staticClass:"create-startup"},[0!=t.startups.length?r("div",{staticClass:"edit",class:{"edit-visible":t.btnActive},on:{click:t.visible}},[r("img",{attrs:{src:"images/edit.png",alt:""}})]):t._e(),t._v(" "),r("div",{staticClass:"avatar"},[t.url?r("img",{staticClass:"avatar",attrs:{src:t.url,alt:""}}):t._e(),t._v(" "),t.url?t._e():r("img",{staticClass:"avatar",attrs:{src:"images/startup1.png",alt:""}})]),t._v(" "),r("div",{staticClass:"block"},[1==t.btnActive||0==t.startups.length?r("div",{staticClass:"user-block"},[r("input",{ref:"file",attrs:{type:"file",accept:"image/x-png,image/gif,image/jpeg",id:"file"},on:{change:t.onFileChange}})]):t._e()])]),t._v(" "),1==t.btnActive||0==t.startups.length?r("div",{staticClass:"files"},[r("img",{staticClass:"mb-2",attrs:{src:"images/file.png",alt:""}}),t._v(" "),r("input",{ref:"files",attrs:{type:"file",multiple:"",required:"",id:"files"},on:{change:t.onSomeFilesChange}})]):t._e(),t._v(" "),r("div",{staticClass:"files",class:{"edit-visible":t.btnActive}},t._l(t.startup.attachments,(function(e,n){return r("div",{key:n},[r("a",{attrs:{href:e.url,target:"_blank"}},[r("img",{staticClass:"mb-2",attrs:{src:"images/file.png",alt:""}})]),t._v("\n                        "+t._s(e.originalFilename)+"\n                    ")])})),0)])]),t._v(" "),r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-auto"},[0==t.startups.length?r("button",{staticClass:"btn-create",on:{click:t.createStartup}},[t._v("\n                    Создать\n                ")]):t._e(),t._v(" "),r("button",{staticClass:"btn-edit",class:{"edit-visible":!t.btnActive},on:{click:t.visible}},[t._v("\n                    Отмена\n                ")]),t._v(" "),r("button",{staticClass:"btn-edit",class:{"edit-visible":!t.btnActive},on:{click:function(e){return t.changeStartup(t.startup.id)}}},[t._v("\n                    Изменить\n                ")])])])],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Client:r(277).default})}}]);